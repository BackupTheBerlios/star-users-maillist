<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Star-users] missing files from incremental backups
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/star-users/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:star-users%40lists.berlios.de?Subject=Re%3A%20%5BStar-users%5D%20missing%20files%20from%20incremental%20backups&In-Reply-To=%3C20070626094509.GC2122%40enterprise.starfleet%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000038.html">
   <LINK REL="Next"  HREF="000040.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Star-users] missing files from incremental backups</H1>
    <B>Lasse Kliemann</B> 
    <A HREF="mailto:star-users%40lists.berlios.de?Subject=Re%3A%20%5BStar-users%5D%20missing%20files%20from%20incremental%20backups&In-Reply-To=%3C20070626094509.GC2122%40enterprise.starfleet%3E"
       TITLE="[Star-users] missing files from incremental backups">lasse-list-star-users at mail.plastictree.net
       </A><BR>
    <I>Tue Jun 26 11:45:09 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000038.html">[Star-users] missing files from incremental backups
</A></li>
        <LI>Next message: <A HREF="000040.html">[Star-users] empty archives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39">[ date ]</a>
              <a href="thread.html#39">[ thread ]</a>
              <a href="subject.html#39">[ subject ]</a>
              <a href="author.html#39">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>* Joerg Schilling writes:
&gt;<i> Lasse Kliemann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/star-users">lasse-list-star-users at mail.plastictree.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Experiment:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; One process repeatedly generates a random filename and then touches, removes 
</I>&gt;<i> &gt; or writes a files by this name (which can result in an existing file to be 
</I>&gt;<i> &gt; modified). In other words: we have a very simple simulation of an active 
</I>&gt;<i> &gt; filesystem.
</I>&gt;<i> 
</I>&gt;<i> This is a case, that cannot be handled correctly without using a fs snapshot
</I>&gt;<i> for the dump.
</I>
[...]
&gt;<i> If files in a directory are removed/renamed or created after the directory 
</I>&gt;<i> namelist has been read using readdir() and before star archives them, many 
</I>&gt;<i> things may happen.
</I>&gt;<i> 
</I>&gt;<i> As star uses fetchdir(), all files that miss after the readdir has been done
</I>&gt;<i> will create a warning. If the file system may reuse the inode numbers for 
</I>&gt;<i> other file names that did exist before with a different inode number, anything
</I>&gt;<i> may happen. Star is not better than the OS you run it on. If you like to backup
</I>&gt;<i> a life filesystem use snapshots.
</I>
Obviously, these are aspects I had not considered. Out of curiosity, I did 
some more runs today using the dumpdate feature (as described in the manpage, 
but without the filesystem snapshot). Comparing the copy with the restored 
filesystem revealed no missing files this time (which might not say much, 
since I only did a few runs). However, files still differed in contents.

I will use filesystem snapshots then. I am new to the snapshots business and 
noticed that Linux offers several techniques. Do you have any recommendations
which one to use?


Lasse
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/star-users/attachments/20070626/d9e0cf09/attachment.pgp">https://lists.berlios.de/pipermail/star-users/attachments/20070626/d9e0cf09/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000038.html">[Star-users] missing files from incremental backups
</A></li>
	<LI>Next message: <A HREF="000040.html">[Star-users] empty archives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39">[ date ]</a>
              <a href="thread.html#39">[ thread ]</a>
              <a href="subject.html#39">[ subject ]</a>
              <a href="author.html#39">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/star-users">More information about the Star-users
mailing list</a><br>
</body></html>
