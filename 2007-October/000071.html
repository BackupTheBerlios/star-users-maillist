<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Star-users] XATTR option does NOT work for chattr attributes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/star-users/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:star-users%40lists.berlios.de?Subject=Re%3A%20%5BStar-users%5D%20XATTR%20option%20does%20NOT%20work%20for%20chattr%20attributes&In-Reply-To=%3C470b6394.WFHVEC6Xy7n/FarT%25Joerg.Schilling%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Star-users] XATTR option does NOT work for chattr attributes</H1>
    <B>Joerg Schilling</B> 
    <A HREF="mailto:star-users%40lists.berlios.de?Subject=Re%3A%20%5BStar-users%5D%20XATTR%20option%20does%20NOT%20work%20for%20chattr%20attributes&In-Reply-To=%3C470b6394.WFHVEC6Xy7n/FarT%25Joerg.Schilling%40fokus.fraunhofer.de%3E"
       TITLE="[Star-users] XATTR option does NOT work for chattr attributes">Joerg.Schilling at fokus.fraunhofer.de
       </A><BR>
    <I>Tue Oct  9 13:18:44 CEST 2007</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000072.html">[Star-users] XATTR option does NOT work for chattr attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71">[ date ]</a>
              <a href="thread.html#71">[ thread ]</a>
              <a href="subject.html#71">[ subject ]</a>
              <a href="author.html#71">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;Vincent Callanan&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/star-users">vincent at callanan.ie</A>&gt; wrote:

&gt;<i> so -xfflags should preserve immutable flag, right?
</I>&gt;<i> but they don't on my installation. That's when I started trying -xattr ;-)
</I>
It definitely does ,-)

&gt;<i> &gt; File flags are implemented since 2001.
</I>&gt;<i> &gt; Star should support to completely restore the file flags.
</I>&gt;<i> &gt; If you have a problem, send a tar archive with a single empty 
</I>&gt;<i> &gt; file that cannot 
</I>&gt;<i> &gt; be restored correctly.
</I>&gt;<i>
</I>&gt;<i> I have attached a star archive of a single empty file.
</I>&gt;<i> Here's what I did to create it.
</I>&gt;<i>
</I>&gt;<i> # cd ~
</I>&gt;<i> # mkdir src
</I>&gt;<i> # cd src
</I>&gt;<i> # touch test
</I>&gt;<i> # chattr +i test
</I>&gt;<i> # lsattr
</I>&gt;<i> ----i------------ ./test
</I>&gt;<i> # cd ..
</I>&gt;<i> # mkdir dst
</I>&gt;<i> # star -cp -xfflags -C ~/src . f=src.star
</I>&gt;<i> # star -xp -xfflags -C ~/dst f=src.star
</I>&gt;<i> # cd dst
</I>&gt;<i> # lsattr
</I>&gt;<i> ----------------- ./test
</I>
Note that this will not work as you did not use the right arhive format.

&gt;<i>
</I>&gt;<i> So clearly, immutable flag is not preserved in backup/restore process on my
</I>&gt;<i> Linux box.
</I>&gt;<i> I also tried -Hexustar option (just in case it is not the default) but that
</I>&gt;<i> did not make any difference.
</I>
Well, -Hexustar definitelz _does_ make the difference.

I did just vevirfy that your test case works on Linux.


&gt;<i> BTW, there is a note in man page about -xfflags on Linux being &quot;buggy by
</I>&gt;<i> design&quot; (wonderful expression!!). Is that just historical or is it still the
</I>&gt;<i> case?
</I>
The design bug is that you need to open all files and call an ioctl() on them
to read the file flags on Linux. This may cause that the tape will rewind from 
the open(2) call that was just to check the file flags.


J&#246;rg

-- 
 EMail:<A HREF="https://lists.berlios.de/mailman/listinfo/star-users">joerg at schily.isdn.cs.tu-berlin.de</A> (home) J&#246;rg Schilling D-13353 Berlin
       <A HREF="https://lists.berlios.de/mailman/listinfo/star-users">js at cs.tu-berlin.de</A>                (uni)  
       <A HREF="https://lists.berlios.de/mailman/listinfo/star-users">schilling at fokus.fraunhofer.de</A>     (work) Blog: <A HREF="http://schily.blogspot.com/">http://schily.blogspot.com/</A>
 URL:  <A HREF="http://cdrecord.berlios.de/old/private/">http://cdrecord.berlios.de/old/private/</A> <A HREF="ftp://ftp.berlios.de/pub/schily">ftp://ftp.berlios.de/pub/schily</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000072.html">[Star-users] XATTR option does NOT work for chattr attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71">[ date ]</a>
              <a href="thread.html#71">[ thread ]</a>
              <a href="subject.html#71">[ subject ]</a>
              <a href="author.html#71">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/star-users">More information about the Star-users
mailing list</a><br>
</body></html>
